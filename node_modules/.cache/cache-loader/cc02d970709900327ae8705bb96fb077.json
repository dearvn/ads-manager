{"remainingRequest":"/Users/nguyenthanhdoan/www/wp/wpplugins/node_modules/thread-loader/dist/cjs.js!/Users/nguyenthanhdoan/www/wp/wpplugins/node_modules/babel-loader/lib/index.js??ref--4-2!/Users/nguyenthanhdoan/www/wp/wpplugins/packages/utils/lib/factory/ajax/createRequestFactory.tsx","dependencies":[{"path":"/Users/nguyenthanhdoan/www/wp/wpplugins/packages/utils/lib/factory/ajax/createRequestFactory.tsx","mtime":1657739433191},{"path":"/Users/nguyenthanhdoan/www/wp/wpplugins/node_modules/cache-loader/dist/cjs.js","mtime":1657732874511},{"path":"/Users/nguyenthanhdoan/www/wp/wpplugins/node_modules/thread-loader/dist/cjs.js","mtime":1657732875400},{"path":"/Users/nguyenthanhdoan/www/wp/wpplugins/node_modules/babel-loader/lib/index.js","mtime":1657732874459}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCB7IGNvbW1vblVybEJ1aWxkZXIsIGNvbW1vblJlcXVlc3QgfSBmcm9tICIuLyI7Ci8qKgogKiBDcmVhdGUgYSB1cmkgYnVpbGRlciBhbmQgcmVxdWVzdCBmdW5jdGlvbiBmb3IgeW91ciBzcGVjaWZpYyBwbHVnaW4gZGVwZW5kaW5nCiAqIG9uIHRoZSByZXN0IHJvb3QgYW5kIGFkZGl0aW9uYWwgcGFyYW1ldGVycy4KICoKICogQHBhcmFtIG9wdGlvbnMKICogQHNlZSB1cmxCdWlsZGVyCiAqIEBzZWUgcmVxdWVzdAogKi8KCmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RGYWN0b3J5KG9wdGlvbnMpIHsKICB2YXIgdXJsQnVpbGRlciA9IGZ1bmN0aW9uIHVybEJ1aWxkZXIocGFzc09wdGlvbnMpIHsKICAgIHJldHVybiBjb21tb25VcmxCdWlsZGVyKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGFzc09wdGlvbnMpLCB7fSwgewogICAgICBvcHRpb25zOiB7CiAgICAgICAgcmVzdE5hbWVzcGFjZTogb3B0aW9ucy5yZXN0TmFtZXNwYWNlLAogICAgICAgIHJlc3ROb25jZTogb3B0aW9ucy5yZXN0Tm9uY2UsCiAgICAgICAgcmVzdFF1ZXJ5OiBvcHRpb25zLnJlc3RRdWVyeSwKICAgICAgICByZXN0Um9vdDogb3B0aW9ucy5yZXN0Um9vdAogICAgICB9CiAgICB9KSk7CiAgfTsKCiAgdmFyIHJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KHBhc3NPcHRpb25zKSB7CiAgICByZXR1cm4gY29tbW9uUmVxdWVzdChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBhc3NPcHRpb25zKSwge30sIHsKICAgICAgb3B0aW9uczogewogICAgICAgIHJlc3ROYW1lc3BhY2U6IG9wdGlvbnMucmVzdE5hbWVzcGFjZSwKICAgICAgICByZXN0Tm9uY2U6IG9wdGlvbnMucmVzdE5vbmNlLAogICAgICAgIHJlc3RRdWVyeTogb3B0aW9ucy5yZXN0UXVlcnksCiAgICAgICAgcmVzdFJvb3Q6IG9wdGlvbnMucmVzdFJvb3QKICAgICAgfQogICAgfSkpOwogIH07CgogIHJldHVybiB7CiAgICB1cmxCdWlsZGVyOiB1cmxCdWlsZGVyLAogICAgcmVxdWVzdDogcmVxdWVzdAogIH07Cn0KCmV4cG9ydCB7IGNyZWF0ZVJlcXVlc3RGYWN0b3J5IH07"},{"version":3,"sources":["/Users/nguyenthanhdoan/www/wp/wpplugins/packages/utils/lib/factory/ajax/createRequestFactory.tsx"],"names":["commonUrlBuilder","commonRequest","createRequestFactory","options","urlBuilder","passOptions","restNamespace","restNonce","restQuery","restRoot","request"],"mappings":";;;;;;AAEA,SACIA,gBADJ,EAKIC,aALJ,QAMO,IANP;AAQA;;;;;;;;;AAQA,SAASC,oBAAT,CAA8BC,OAA9B,EAAoD;AAChD,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,WAAD;AAAA,WACfL,gBAAgB,iCACTK,WADS;AAEZF,MAAAA,OAAO,EAAE;AACLG,QAAAA,aAAa,EAAEH,OAAO,CAACG,aADlB;AAELC,QAAAA,SAAS,EAAEJ,OAAO,CAACI,SAFd;AAGLC,QAAAA,SAAS,EAAEL,OAAO,CAACK,SAHd;AAILC,QAAAA,QAAQ,EAAEN,OAAO,CAACM;AAJb;AAFG,OADD;AAAA,GAAnB;;AAWA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAKZL,WALY;AAAA,WAUZJ,aAAa,iCACNI,WADM;AAETF,MAAAA,OAAO,EAAE;AACLG,QAAAA,aAAa,EAAEH,OAAO,CAACG,aADlB;AAELC,QAAAA,SAAS,EAAEJ,OAAO,CAACI,SAFd;AAGLC,QAAAA,SAAS,EAAEL,OAAO,CAACK,SAHd;AAILC,QAAAA,QAAQ,EAAEN,OAAO,CAACM;AAJb;AAFA,OAVD;AAAA,GAAhB;;AAoBA,SAAO;AACHL,IAAAA,UAAU,EAAVA,UADG;AAEHM,IAAAA,OAAO,EAAPA;AAFG,GAAP;AAIH;;AAED,SAASR,oBAAT","sourcesContent":["import { BaseOptions } from \"../../options\";\nimport { WithOptional } from \"../..\";\nimport {\n    commonUrlBuilder,\n    RouteRequestInterface,\n    RouteParamsInterface,\n    RouteResponseInterface,\n    commonRequest\n} from \"./\";\n\n/**\n * Create a uri builder and request function for your specific plugin depending\n * on the rest root and additional parameters.\n *\n * @param options\n * @see urlBuilder\n * @see request\n */\nfunction createRequestFactory(options: BaseOptions) {\n    const urlBuilder = (passOptions: WithOptional<Parameters<typeof commonUrlBuilder>[0], \"options\">) =>\n        commonUrlBuilder({\n            ...passOptions,\n            options: {\n                restNamespace: options.restNamespace,\n                restNonce: options.restNonce,\n                restQuery: options.restQuery,\n                restRoot: options.restRoot\n            }\n        });\n\n    const request = <\n        Request extends RouteRequestInterface,\n        Params extends RouteParamsInterface,\n        Response extends RouteResponseInterface\n    >(\n        passOptions: WithOptional<Parameters<typeof commonRequest>[0], \"options\"> & {\n            params?: Params;\n            request?: Request;\n        }\n    ): Promise<Response> =>\n        commonRequest({\n            ...passOptions,\n            options: {\n                restNamespace: options.restNamespace,\n                restNonce: options.restNonce,\n                restQuery: options.restQuery,\n                restRoot: options.restRoot\n            }\n        });\n\n    return {\n        urlBuilder,\n        request\n    };\n}\n\nexport { createRequestFactory };\n"]}]}